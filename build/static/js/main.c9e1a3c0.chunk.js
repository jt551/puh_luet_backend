(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,t,n){e.exports=n(36)},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(13),c=n.n(u),l=n(2),o=function(e,t){return e.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())}))},i=function(e){return r.a.createElement("li",{className:"list-group-item col-lg-4"},e.name," : ",e.number)},m=n(3),s=n.n(m),f="/api/persons",d=function(){return s.a.get(f).then((function(e){return e.data}))},h=function(e){return s.a.post(f,e).then((function(e){return e.data}))},p=function(e,t){return s.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},b=function(e){return s.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},E=function(e){var t=e.contacts,n=e.filter,a=o(t,n);return r.a.createElement("div",null,r.a.createElement("h1",null,"Contacts"),a.map((function(t,n){return r.a.createElement("div",{className:"row",key:n},r.a.createElement(i,{key:t.name,name:t.name,number:t.number})," ",r.a.createElement("button",{className:"btn btn-outline-danger btn-sm",onClick:function(){return n=t.id,a=t.name,r=e.setNotifyMsg,e.setErrorMsg,void(window.confirm("Remove contact ".concat(a,"?"))&&(b(n).then(r("".concat(a," deleted"))).then(setTimeout((function(){r(null)}),3e3)).catch((function(t){e.setErrorMsg("error"),setTimeout((function(){e.setErrorMsg(null)}),3e3)})),e.setPersons(e.persons.filter((function(e){return e.id!==n})))));var n,a,r}},"Delete"))})))},g=function(e){return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"filterinput"},"Filter results"),r.a.createElement("input",{type:"text",className:"form-control col-lg-4",id:"filterinput",placeholder:"Filter",value:e.filter,onChange:e.handleFilterChange}))},v=function(e){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:e.formSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"nameinput"},"Add new name"),r.a.createElement("input",{type:"text",className:"form-control col-lg-4",id:"nameinput",placeholder:"Name",value:e.newName,onChange:e.handleChange}),r.a.createElement("label",{htmlFor:"phoneinput"},"number"),r.a.createElement("input",{type:"text",className:"form-control col-lg-4",id:"phoneinput",placeholder:"Number",value:e.newNumber,onChange:e.handleNumChange})),r.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Add")))},N=function(e){return null===e.message&&null===e.err?null:e.message?r.a.createElement("div",{className:"notify"},r.a.createElement("p",null,e.message)):e.err?r.a.createElement("div",{className:"error"},r.a.createElement("p",null,e.err)):void 0},w=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)(""),o=Object(l.a)(c,2),i=o[0],m=o[1],s=Object(a.useState)(""),f=Object(l.a)(s,2),b=f[0],w=f[1],O=Object(a.useState)(""),j=Object(l.a)(O,2),C=j[0],y=j[1],S=Object(a.useState)(null),F=Object(l.a)(S,2),T=F[0],k=F[1],x=Object(a.useState)(null),M=Object(l.a)(x,2),P=M[0],A=M[1];Object(a.useEffect)((function(){d().then((function(e){return u(e)})).catch((function(e){k("connection error"),setTimeout((function(){k(null)}),3e3)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(N,{message:P,err:T}),r.a.createElement(v,{formSubmit:function(e){if(e.preventDefault(),n.find((function(e){return e.name===i}))){if(window.confirm("".concat(i," exists, do you want to update the number?"))){var t=n.find((function(e){return e.name===i}));t.number=b,p(t.id,t).then((function(e){u(n.map((function(n){return n.id!==t.id?n:e}))),A("".concat(i," updated")),m(""),w(""),setTimeout((function(){A(null)}),3e3)})).catch((function(e){k("update error"),setTimeout((function(){k(null)}),3e3)}))}}else h({name:i,number:b}).then((function(e){u(n.concat(e)),A("".concat(i," created")),m(""),w(""),setTimeout((function(){A(null)}),3e3)})).catch((function(e){k(e.response.data.error),setTimeout((function(){k(null)}),3e3)}))},newName:i,handleChange:function(e){m(e.target.value)},newNumber:b,handleNumChange:function(e){w(e.target.value)}}),r.a.createElement(g,{filter:C,handleFilterChange:function(e){y(e.target.value)}}),r.a.createElement(E,{contacts:n,filter:C,persons:n,setPersons:u,setNotifyMsg:A,setErrorMsg:k}))};c.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.c9e1a3c0.chunk.js.map